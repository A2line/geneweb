<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<head><title>Les diff&eacute;rentes commandes</title></head>
<body bgcolor="#d6bfaf">
<h1>Les diff&eacute;rentes commandes</h1>

Ce chapitre contient une description d&eacute;taill&eacute;e des
diff&eacute;rentes commandes fournies avec le logiciel, avec leurs
options. Nous avons essay&eacute; de le rendre compr&eacute;hensible
&agrave; tous, mais il est parfois difficile d'&eacute;viter le jargon
technique: si vous n'&ecirc;tes pas un sp&eacute;cialiste en
informatique, sautez les explications qui vous paraissent difficiles.

<ul>

<li> D&eacute;mon GeneWeb: <a href="#Gwd">gwd</a>

<li> Gedcom vers GeneWeb: <a href="#Ged">ged2gwb</a>

<li> GeneWeb vers Gedcom: <a href="#Gee">gwb2ged</a>

<li> Compilateur GeneWeb: <a href="#Gwc">gwc</a>

<li> D&eacute;compilateur GeneWeb: <a href="#Gwu">gwu</a>

<li> Pr&eacute;calcul de consanguinit&eacute;: <a href="#Csg">consang</a>

</ul>

<h4> <a name="Gwd">D&eacute;mon GeneWeb: gwd</a> </h4>

Gwd est la commande principale de <em>GeneWeb</em>. Il re&ccedil;oit
des requ&ecirc;tes et r&eacute;pond le r&eacute;sultat, via le
r&eacute;seau internet et en suivant le protocole HTTP des serveurs
Web.

<p>

Gwd peut fonctionner en deux modes: le mode serveur et le mode CGI.

<p>

En mode serveur, il se comporte comme un serveur Web normal (sauf
qu'il ne sert que de la g&eacute;n&eacute;alogie). Il n'a pas besoin
de serveur Web pour fonctionner et ne g&egrave;ne pas un serveur Web
&eacute;ventuellement install&eacute; sur le m&ecirc;me ordinateur.
Il passe le plus clair de son temps &agrave; attendre passivement des
connexions. Quand une connexion arrive, il la traite, r&eacute;pond le
r&eacute;sultat et se remet en attente. Sous Unix, il peut traiter
plusieurs connexions en m&ecirc;me temps.

<p>

En mode CGI, il se comporte comme un programme CGI: il a besoin d'un serveur
Web pour fonctionner. Quand une requ&ecirc;te le concerne, le serveur Web
le lance en lui transmettant la requ&ecirc;te &agrave; traiter et attend
qu'il lui r&eacute;ponde le r&eacute;sultat.

<p>

Voici quelles sont les options de "gwd":

<p>

<ul><li>-help<p>Affiche la liste des options (en anglais) et
s'arr&ecirc;te.</ul>

<ul><li>-hd <em>r&eacute;pertoire</em>

<p>Indique le r&eacute;pertoire o&ugrave; sont install&eacute;s les
fichiers de <em>GeneWeb</em>. Par d&eacute;faut, c'est le
r&eacute;pertoire courant. Il doit contenir un r&eacute;pertoire
"lang" et un r&eacute;pertoire "images".</ul>

<ul><li>-bd <em>r&eacute;pertoire</em>

<p>Indique le r&eacute;pertoire o&ugrave; sont install&eacute;es les
bases de donn&eacute;es. Par d&eacute;faut, c'est le r&eacute;pertoire
courant. Il peut contenir aussi un r&eacute;pertoire "lang" et un
r&eacute;pertoire "images": gwd va d'abord consulter ce
r&eacute;pertoire pour ses fichiers, et s'il ne les trouve pas, va
chercher dans le r&eacute;pertoire sp&eacute;cifi&eacute; par l'option
"-hd" ci-dessus.</ul>

<ul><li>-cgi

<p>Force le mode CGI. Cette option est en principe inutile, car gwd
d&eacute;tecte tout seul quand il est lanc&eacute; par un serveur Web.
Cette option permet d'en &ecirc;tre s&ucirc;r (car il ne faut pas que
le serveur Web puisse lancer "gwd" en serveur par m&eacute;garde), et
permet de tester le r&eacute;sultat de gwd dans une fen&ecirc;tre
int&eacute;ractive, pour v&eacute;rifier son bon fonctionnement.</ul>

<ul><li>-p <em>num&eacute;ro</em>

<p>En mode serveur, s&eacute;lectionne un num&eacute;ro de port. Par
d&eacute;faut, c'est 2317. N'importe quel autre nombre
sup&eacute;rieur &agrave; 1024 peut &ecirc;tre choisi, &agrave;
condition qu'il ne soit pas d&eacute;j&agrave; pris par un autre
service. Pour choisir un num&eacute;ro inf&eacute;rieur &agrave; 1024,
il faut &ecirc;tre root (sous Unix) ou Administrateur (sous
Windows). Note: en choisissant le port 80, qui est le port par
d&eacute;faut des serveurs Web, on n'a pas besoin de sp&eacute;cifier
":num&eacute;ro" dans l'adresse HTTP &agrave; utiliser.</ul>

<ul><li>-wizard <em>mot-de-passe</em>

<p>Donne un mot de passe "sorcier" par d&eacute;faut. Le
<em>sorcier</em> a acc&egrave;s &agrave; toutes les informations et a
le droit de faire des modifications en ligne dans une base de
donn&eacute;es. Cette option peut &ecirc;tre masqu&eacute;e par la
pr&eacute;sence d'un fichier "toto.cnf" pour la base "toto".</ul>

<ul><li>-friend <em>mot-de-passe</em>

<p>Donne un mot de passe "ami" par d&eacute;faut. L'<em>ami</em> a
acc&egrave;s &agrave; toutes les dates et informations personnelles,
m&ecirc;me pour les personnes n&eacute;es avant un si&egrave;cle. Il
n'a pas acc&egrave;s aux modifications en ligne. Cette option peut
&ecirc;tre masqu&eacute;e par la pr&eacute;sence d'un fichier
"toto.cnf" pour la base "toto".</ul>

<ul><li>-lang <em>id</em>

<p>Sp&eacute;cifie une langue par d&eacute;faut. Par d&eacute;faut de cette
option, c'est le fran&ccedil;ais (fr). Cette option peut
&ecirc;tre masqu&eacute;e par la pr&eacute;sence d'un fichier
"toto.cnf" pour la base "toto".</ul>

<ul><li>-only <em>adresse</em>

<p>Sp&eacute;cifie une adresse internet qui sera la seule ayant le
droit d'acc&eacute;der au site. L'adresse est celle qui est
affich&eacute;e derri&egrave;re "From:" dans les traces de gwd.</ul>

<ul><li>-auth <em>fichier</em>

<p>Sp&eacute;cifie une restriction d'acc&egrave;s au site par nom
d'utilisateur et mot de passe. Le fichier doit contenir une ou
plusieurs lignes de la forme "utilisateur:mot-de-passe".</ul>

<ul><li>-log <em>fichier</em>

<p>Redirige les traces de connexion dans ce fichier. Par d&eacute;faut, elle
s'affichent dans la fen&ecirc;tre int&eacute;ractive.</ul>

<ul><li>-nolock

<p>Demande de ne pas verrouiller une base de donn&eacute;es quand on
la modifie. Cela peut &ecirc;tre dangereux, car si deux utilisateurs
la modifient exactement en m&ecirc;me temps, la base peut &ecirc;tre
ab&icirc;m&eacute;e. N&eacute;anmoins, cette option est utile quand on
est sous Unix et qu'on acc&egrave;de la base par NFS, car le
verrouillage ne fonctionne pas sous NFS et bloque la r&eacute;ponse de
gwd pendant quelques interminables secondes.</ul>

<ul><li>-max_clients <em>nombre</em>

<p>Cette option ne fonctionne que dans la version Unix (pas
Windows). Indique le nombre maximum de clients &agrave; traiter en
m&ecirc;me temps (mode serveur uniquement). Le d&eacute;faut est de ne
pas donner de limite. <strong>Il est fortement conseill&eacute;
d'utiliser cette option sous Unix</strong> si vous n'utilisez pas gwd
en local, car chaque connexion lance un nouveau processus et des
connexions &agrave; un rythme &eacute;lev&eacute; (par un robot ou par
un tar&eacute; qui fait cinquante "reload" &agrave; toute vitesse)
risque d'&eacute;crouler votre ordinateur.</ul>

<ul><li>-robot_xcl <em>cnt,sec</em>

<p>Cette option ne fonctionne que dans la version Unix (pas
Windows). Permet d'exclure les robots qui ne disent pas leur nom. En
principe, gwd indique aux robots qu'ils ne doivent pas parcourir le
site (car le nombre de requ&ecirc;tes possibles est quasiment infini).
Cependant, comme il est possible de lancer des robots qui ne
respectent pas cette injonction, cette option tente de les
d&eacute;tecter et exclut ceux qu'il r&eacute;ussit &agrave;
rep&eacute;rer. Si un client fait plus de <em>cnt</em> connexions en
<em>sec</em> secondes, on consid&egrave;re qu'il est un robot, et il
est d&eacute;finitivement rejet&eacute; (jusqu'&agrave; ce qu'on
relance gwd). En fait, cette option n'est pas compl&egrave;tement
satisfaisante, car il n'est pas facile de donner de "bonnes" valeurs
aux param&egrave;tres. Il est donc possible qu'elle change dans une
version future.</ul>

<p>

Pour transmettre des options, vous pouvez aussi fabriquer un fichier
que vous nommerez "gwd.arg" dans le m&ecirc;me r&eacute;pertoire que
la commande "gwd". Ce fichier contient les options, mais en les
s&eacute;parant par des lignes, au lieu d'espaces. Par exemple, si
vous voulez que "gwd" se lance ainsi:

<pre>
     gwd -bd bases -wizard "mon mot de passe" -p 8022
</pre>

vous pouvez faire un fichier "gwd.arg" contenant:

<pre>
     -bd
     bases
     -wizard
     mon mot de passe
     -p
     8022
</pre>

et il vous suffira alors de ne taper que "gwd".

<p>

Sous Windows, vous pouvez simplement double-cliquer sur l'ic&ocirc;ne
de gwd. Cela ouvrira une fen&ecirc;tre MSDOS o&ugrave; gwd sera
lanc&eacute;. En tapant Control-C, gwd s'arr&ecirc;tera et la
fen&ecirc;tre MSDOS se fermera. Utilisez &eacute;ventuellement la
technique du fichier "gwd.arg" ci-dessus pour transmettre des options.

<p>

Retour vers <a href="diruse.htm">Mode d'Emploi</a>.

<p><hr><font size=-1><em>&copy; Copyright INRIA 1998 -
GeneWeb</em></font><br>

</body>
