L'objectif de cette moulinette est d'exploiter au mieux les fichiers INSEE :

https://www.data.gouv.fr/fr/datasets/fichier-des-personnes-decedees/

Code officiel géographique
https://www.insee.fr/fr/information/2560452
https://www.insee.fr/fr/statistiques/fichier/3720946/cog_ensemble_2019_csv.zip

On va utiliser une base MySQL, voici quelques notes pour la créer :
mysql -u root -p
(renseigner le mot de passe puis Entrée)
mysql> create database insee;
mysql> create user 'insee'@'localhost' identified by '<mot_de_passe>';
mysql> grant all privileges on insee.* to 'insee'@'localhost';
mysql> grant file on *.* to 'insee'@'localhost';
mysql> exit

Pour mémoriser le mot de passe de la connexion :
mysql_config_editor set --login-path=client --user=insee --password

Pré-requis :
 - wget
 - jq

Composants de la moulinette :
 - insee.ml => insee.exe : Outil pour extraire les données d'une base GeneWeb à confronter au fichier INSEE
 - mysql.sh : Permet de se connecter à la base de donnée (à ajuster)
 - get-files.sh : Permet de récupérer et mettre à jour le fichier INSEE
 - load-files.sh : Permet charger tous les fichiers INSEE en base
 - reload-file.sh : Permet de recharger une année du fichier INSEE en base
 - get-COG.sh : Permet de récuperer le référentiel des commune de l'INSEE (COG)
 - ./mysql.sh < load-SQL.sql : Permet le fichier des pays
 - ./mysql.sh < load-COG.sql : Permet de charger le référenciel COG en base
 - ./mysql.sh < PlaceNorme.sql : Permet de synthétiser le référentiel COG en une seule table (avec ma convention utilisée dans GeneWeb)
   N.B.: 2 alternatives sont disponibles
 - ./mysql.sh < getPlaceLib.sql : Création d'une fonction pour convertir un code INSEE en libellé commune pour une date donnée
 - ./mysql.sh < processTodo.sql : Création de la procédure qui va confronter les données GeneWeb avec le fichier INSEE
 - run-TODO.sh : (à ajuster si besoin pour utilisation avec GeneWeb)
   -> si le binaire insee.exe est trouvé, lance l'extraction GeneWeb (génère un fichier TODO.lst)
   -> charge le fichier TODO.lst puis confronte chaque ligne au fichier INSEE
   -> utilise rapport.sh et rapportFormate.sh pour créer un rapport lisible pour piloter les mises à jour dans GeneWeb

Si vous n'avez pas GeneWeb, vous pouvez extraire les données de votre base dans un fichier TODO.lst avec séparateur | et colonnes :
 - Nom (En majuscules sans accent)
 - Prenom (En majuscules sans accent)
 - Sexe (1 ou 2 comme dans le fichier INSEE)
 - Année de naissance YYYY (0000 si inconnu)
 - Mois de naissance MM (00 si inconnu)
 - Jour de naissance DD (00 si inconnu)
 - Lieu de naissance (ex.: Arras, Pas-de-Calais, France)
 - Année de décès YYYY (0000 si inconnu)
 - Mois de décès MM (00 si inconnu)
 - Jour de décès (00 si inconnu)
 - Cle : identifiant te permettant de retrouver facilement la personne dans ta base (en cas d'homonymie)

Pour information, la moulinette calcule un score de cohérence entre la donnée TODO et le fichier INSEE. Un score de 6 correspond à des données identiques. Seules comparaisons ayant un score supérieur ou égal à 2 sont jugées exploitables.
