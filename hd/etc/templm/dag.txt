%doctype;
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <!-- $Id: dag.txt,v 5.4 2007/01/19 01:53:16 ddr Exp $ -->
  <!-- Copyright (c) 1998-2007 INRIA -->
  <!-- Modified mickroue(a)yahoo.fr 20130608 templ=templm -->
  <title>%nn;
    %if;(evar.slices = "on")
      [*display by slices/slice width/overlap/total width]0%nn;
    %else;%head_title;%end;
  </title>
  <meta name="robots" content="none"%/>
  <meta name="format-detection" content="telephone=no"%/>
  <meta http-equiv="Content-Type" content="text/html; charset=%charset;"%/>
  <meta http-equiv="Content-Style-Type" content="text/css"%/>
  <link rel="shortcut icon" href="%image_prefix;/favicon_gwd.png"%/>
  %include.css;
  %base_header;
</head>

<body%body_prop; id="dag">
%message_to_wizard;

%if;not cancel_links;
  <div class="menu2">
    <form id="tools" style="display:inline" method="get" action="%action;">
      %foreach;env_binding;
        %if;(
             env.key = "bd" or
             env.key = "bg" or
             env.key = "cgl" or
             env.key = "color" or
             env.key = "image" or
             env.key = "spouse" or
             env.key = "v"
             )
        %else;
         <input type="hidden" name="%env.key;" value="%env.val.decoded;" %/>
        %end;
      %end;
      <div><a href="#">[*tools]</a>
      <div class="s_menu">
        <fieldset>
          <label><input type="checkbox" name="cgl" value="on"
                 %if;(evar.cgl = "on") checked="checked"%end;%/>[cancel GeneWeb links]</label>
          %if;(bvar.no_image_for_visitor != "yes" or friend or wizard)
            <label><input type="checkbox" name="image" value="on"
                   %if;(evar.image = "on") checked="checked"%end;%/>[image/images]1</label>
          %end;
          <label>[border]<input name="bd" size="1" maxlength="2" style="width:1em;" value="%evar.bd;" %/></label>
          <table summary="colors" cellspacing="0" cellpadding="0">
            <tr>
              <td align="%left;">[color]Â </td>
              <td align="%left;">
                <input type="radio" name="color" value=""
                  %if;(evar.color="") checked="checked"%end;%/></td>
              %for;i;1;7;
                %let;bgi;bg%i;%in;
                <td class="%bgi;"><input type="radio" name="color" value="%bgi;"
                    %if;(evar.color=bgi) checked="checked"%end;%/></td>
              %end;
            </tr>
          </table>
        </fieldset>
        %if;(evar.m = "RLM" or evar.em = "R")
          <fieldset>
            <label><input type="checkbox" name="spouse" value="on"
                   %if;(evar.spouse = "on") checked="checked"%end;%/>[include spouses]</label>
          </fieldset>
        %end;
        %if;(evar.t="T")
          <fieldset><legend>[*generation/generations]0</legend>
            <div class="v">
              %let;l_bmaxv;
                %if;(evar.m = "A")
                  %if;(bvar.max_anc_tree = "")7%else;%bvar.max_anc_tree;%end;
                %else;
                  %if;(bvar.max_desc_tree = "")4%else;%bvar.max_desc_tree;%end;
                %end;
              %in;
              %let;l_emaxv;%if;(evar.maxv = "")%l_bmaxv;%elseif;(evar.maxv < l_bmaxv)%evar.maxv;%else;%l_bmaxv;%end;%in;
              %let;l_maxv;%expr(l_emaxv + 1)%in;
              %let;l_minv;%if;(evar.m = "D")1%else;2%end;%in;
              %for;i;l_minv;l_maxv;
                <label>%i;<br%/>
                  <input type="radio" name="v" value="%i;"%if;(evar.v = i) checked="checked"%end;%/>
                </label>
              %end;
            </div>
          </fieldset>
        %end;
        <div class="ok"><input type="submit" value="ok"%/></div>
      </div>
      </div>
    </form>
    %if;has_referer;
      <a href="%referer;" title="[back]">&lt;&lt;</a>
    %end;
      <a href="%prefix;" title="[visualize/show/hide/summary]3">^^</a>
  </div>
%end;
%if;(evar.slices = "on")
  <h1>%nn;
    [*display by slices/slice width/overlap/total width]0%nn;
  </h1>
  <form method="GET" action="%action;">
  <p>
  %hidden;
  %foreach;env_binding;
    %if;(env.key != "slices")
      <input type="hidden" name="%env.key;" value="%env.val.decoded;"%/>
    %end;
  %end;
  </p>
  <table>
  <tr align="%left;">
    <td align="%right;">
      <label>
      [*don't group the common branches together]
      <input type="checkbox" name="nogroup" value="on"%/>
      </label>
    </td>
  </tr>
  <tr align="%left;">
    <td align="%right;">
      <label>
      [*display by slices/slice width/overlap/total width]1
      <input name="dpos" size="5" value="78"%/>
      </label>
    </td>
  </tr>
  <tr align="%left;">
    <td align="%right;">
      <label>
      [*display by slices/slice width/overlap/total width]2
      <input name="overlap" size="5" value="10"%/>
      </label>
    </td>
  </tr>
  <tr align="%left;">
    <td align="%right;">
      <label>
      [*display by slices/slice width/overlap/total width]3
      (%dag.min_wid;-%dag.max_wid;)
      <input name="width" size="5" value="%nn;
        %if;(dag.max_wid <= 78)%dag.max_wid;
        %elseif;(dag.min_wid >= 78)%dag.min_wid;
        %else;78%end;"%/>
      </label>
    </td>
  </tr>
  </table>
  <p><input type="submit" value="Ok"%/></p>
  </form>
%else;
  %if;(not cancel_links)
    <div class="menu">
      %if;(evar.notab != "on")
        <span>
         <a href="%prefix;%foreach;env_binding;%env.key;=%env.val.decoded;;%end;%nn;
           notab=on;slices=on" accesskey="/" title="[display by slices/slice width/overlap/total width]0">//</a>
        </span>
      %end;
      %if;(link_next != "")
        <span>
          <a href="%link_next;;image=%evar.image;;bd=%evar.bd;" title="[next relationship path] (&gt;)" accesskey=">">[next relationship path] &gt;&gt;</a>
        </span>
      %end;
    </div>
  %end;
  %if;(evar.notab = "on" or evar.pos2 != "")
    %let;dpos;%if;(evar.dpos != "")%evar.dpos;%else;78%end;%in;
    %let;pos1;%if;(evar.pos1 != "")%evar.pos1;%else;0%end;%in;
    %let;pos2;%if;(evar.pos2 != "")%evar.pos2;%else;%dpos;%end;%in;
    %let;overlap;%if;(evar.overlap != "")%evar.overlap;%else;10%end;%in;
    %if;(pos1 != 0 or pos2 < dag.ncol)
      <div style="text-align:right">
        <br%/>
        %if;(pos1 = 0)&nbsp;%nn;
        %else;
          <a href="%prefix_no_iz;
            %foreach;env_binding;
              %if;(env.key != "pos1" and env.key != "pos2")
                %env.key=%env.val.decoded;;%nn;
              %end;
            %end;
            pos1=%expr;(pos1 + overlap - dpos)
            ;pos2=%expr(pos1 + overlap)">&lt;&lt;</a>%nn;
        %end;%nl
        %if;(pos2 >= dag.ncol)&nbsp;%nn;
        %else;
          <a href="%prefix_no_iz;
            %foreach;env_binding;
              %if;(env.key != "pos1" and env.key != "pos2")
                %env.key=%env.val.decoded;;%nn;
              %end;
            %end;
            pos1=%expr;(pos2 - overlap)
            ;pos2=%expr(pos2 - overlap + dpos)">&gt;&gt;</a>%nn;
        %end;%nl;
      </div>
    %end;
    <pre>
    %foreach;dag_line;
      %foreach;dag_line_pre;
        %foreach;dag_cell_pre;
          %dag_cell_pre;%nn;
        %end;%nl;
      %end;
    %end;
    </pre>
  %else;
    <table border="%border;" width="100%%"><tr><td align="center">
    <table border="%border;" cellspacing="0" cellpadding="0">
    %foreach;dag_line;
      <tr align="left">
      %foreach;dag_cell;
        <td %if;(dag_cell.colspan > 1)colspan="%dag_cell.colspan;" %end;align="%dag_cell.align;">%nn;
        %if;dag_cell.is_nothing;&nbsp;%nn;
        %elseif;dag_cell.is_bar;
          %if;(dag_cell.bar_link != "" and evar.cgl != "on")
            <a style="text-decoration:none;" href="%dag_cell.bar_link;">|</a>%nn;
          %else;|%end;
        %elseif;(dag_cell.item != "")%dag_cell.item;
        %elseif;(dag_cell.text != "")%dag_cell.text;
        %else;
          %if;dag_cell.is_hr_left;
            <hr class="%left;"%/>%nn;
          %elseif;dag_cell.is_hr_right;
            <hr class="%right;"%/>%nn;
          %else;
            <hr class="full"%/>%nn;
          %end;
        %end;
        </td>
      %end;
      </tr>
    %end;
    </table>
    </td></tr></table>
  %end;
%end;
  %base_trailer;
  %copyright;
</body>
</html>
