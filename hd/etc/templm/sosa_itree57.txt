%let;h5;27%in; %let;h7;22%in;
%let;w5;23%in; %let;w7;22%in;

%define;bg(xx)
  %apply;nth%with;
    /FFC8E3/F0CBFE/DDCEFF/FFA8D3/E7A9FE/FF86C2/DD88FD/FF62B0/C4ABFE
  %and;xx%end;
%end;

%define;top5_0(xx)
  %apply;nth%with;
    /3/1/5/1/1/5/5/0/2/0/2/4/6/4/6/0/0/2/2/0/0/2/2/4/4/6/6/4/4/6/6/
  %and;xx%end;
%end;
%define;left5_0(xx)
  %apply;nth%with;
    /3/3/3/1/5/1/5/1/1/5/5/1/1/5/5/0/2/0/2/4/6/4/6/0/2/0/2/4/6/4/6/
  %and;xx%end;
%end;
%define;top5_0_(xx)
  %apply;nth%with;
    //2/4/1/1/5/5/
  %and;xx%end;
%end;
%define;left5_0_(xx)
  %apply;nth%with;
    //3/3/2/4/2/4/
  %and;xx%end;
%end;

%define;top7_0(xx)
  %apply;nth%with;
    /7/3/11/3/3/11/11/1/5/1/5/9/13/9/13/1/1/5/5/1/1/5/5/9/9/13/13/9/9/13/13/0/2/0/2/4/6/4/6/0/2/0/2/4/6/4/6/8/10/8/10/12/14/12/14/8/10/8/10/12/14/12/14/0/0/2/2/0/0/2/2/4/4/6/6/4/4/6/6/0/0/2/2/0/0/2/2/4/4/6/6/4/4/6/6/8/8/10/10/8/8/10/10/12/12/14/14/12/12/14/14/8/8/10/10/8/8/10/10/12/12/14/14/12/12/14/14/
  %and;xx%end;
%end;
%define;left7_0(xx)
  %apply;nth%with;
    /7/7/7/3/11/3/11/3/3/11/11/3/3/11/11/1/5/1/5/9/13/9/13/1/5/1/5/9/13/9/13/1/1/5/5/1/1/5/5/9/9/13/13/9/9/13/13/1/1/5/5/1/1/5/5/9/9/13/13/9/9/13/13/0/2/0/2/4/6/4/6/0/2/0/2/4/6/4/6/8/10/8/10/12/14/12/14/8/10/8/10/12/14/12/14/0/2/0/2/4/6/4/6/0/2/0/2/4/6/4/6/8/10/8/10/12/14/12/14/8/10/8/10/12/14/12/14/
  %and;xx%end;
%end;
%define;top7_0_(xx)
  %apply;nth%with;
    //4/8/3/3/11/11/2/4/2/4/10/12/10/12/1/1/5/5/1/1/5/5/9/9/13/13/9/9/13/13/
  %and;xx%end;
%end;
%define;left7_0_(xx)
  %apply;nth%with;
    //7/7/4/8/4/8/3/3/11/11/3/3/11/11/2/4/2/4/10/12/10/12/2/4/2/4/10/12/10/12/
  %and;xx%end;
%end;

<h3><tt>Sosa I-tree 5</tt></h3>
<div class="menu" style="position:relative;width:120px;height:180px;">
  %foreach;ancestor_level(5)
    %foreach;ancestor;
      %let;top;%expr(top5_0(ancestor.anc_sosa.v)*h5)%in;
      %let;left;%expr(10+left5_0(ancestor.anc_sosa.v)*w5)%in;
      %let;top_;%expr(top5_0_(ancestor.anc_sosa.v)*h5)%in;
      %let;left_;%expr(10+left5_0_(ancestor.anc_sosa.v)*w5)%in;
      %let;bg;%if;(ancestor.same != "")CBFECE;%else;%apply;bg(level)%end;%in;
      <a style="position:absolute;top:%top;px;left:%left;px;background-color:#%bg;;padding:%pad;;font-family:monospace;font-size:%font;"
      href="%prefix;%ancestor.access;"
      title="Sosa %ancestor.anc_sosa;[:] %if;(ancestor.is_male)♂%else;♀%end; %ancestor.first_name; %ancestor.surname; (%ancestor.occ) – [*generation/generations]0 %level;">
      %if;(ancestor.same != "")%ancestor.same;%else;%ancestor.anc_sosa;%end;</a>
      %if;(ancestor.anc_sosa.v=2 or ancestor.anc_sosa.v=3)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:5px;">↑</div>
      %end;
      %if;(ancestor.anc_sosa.v=3)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:5px;">↓</div>
      %end;
      %if;(ancestor.anc_sosa.v=4 or ancestor.anc_sosa.v=6)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:5px;">←</div>
      %end;
      %if;(ancestor.anc_sosa.v=5 or ancestor.anc_sosa.v=7)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:5px;">→</div>
      %end;
    %end;
  %end;
</div>
<h3><tt>Sosa I-tree 7</tt></h3>
<div class="menu" style="position:relative;width:240px;height:350px;">
  %foreach;ancestor_level(7)
    %foreach;ancestor;
      %let;top;%expr(top7_0(ancestor.anc_sosa.v)*h7)%in;
      %let;left;%expr(10+left7_0(ancestor.anc_sosa.v)*w7)%in;
      %let;top_;%expr(top7_0_(ancestor.anc_sosa.v)*h7)%in;
      %let;left_;%expr(10+left7_0_(ancestor.anc_sosa.v)*w7)%in;
      %let;pad;%if;(ancestor.anc_sosa < 8)  3px 6px 3px 7px
           %elseif;(ancestor.anc_sosa < 10) 4px 8px 4px 7px
           %elseif;(ancestor.anc_sosa < 16) 4px 4px 4px 4px
           %elseif;(ancestor.anc_sosa < 100) 5px 5px 5px 4px  %else; 5px 2px 5px 2px %end;%in;
      %let;font;%if;(ancestor.anc_sosa < 8)  14px
            %elseif;(ancestor.anc_sosa < 16) 12px %else; 10px %end;%in;
        %let;bg;%if;(ancestor.same != "")CBFECE;%else;%apply;bg(level)%end;%in;
      <a style="position:absolute;top:%top;px;left:%left;px;background-color:#%bg;;padding:%pad;;font-family:monospace;font-size:%font;"
      href="%prefix;%ancestor.access;"
      title="Sosa %ancestor.anc_sosa;[:] %if;(ancestor.is_male)♂%else;♀%end; %ancestor.first_name; %ancestor.surname; (%ancestor.occ) – [*generation/generations]0 %level;">
      %if;(ancestor.same != "")%ancestor.same;%else;%ancestor.anc_sosa;%end;</a>
      %if;(ancestor.anc_sosa.v=2 or ancestor.anc_sosa.v=3)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:4px 5px;font-family:monospace;font-size:26px">│<br />│</div>
      %elseif;(ancestor.anc_sosa.v>3 and ancestor.anc_sosa.v<8)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:0px 2px;font-family:monospace;font-size:21px">─────</div>
      %elseif;(ancestor.anc_sosa.v>7 and ancestor.anc_sosa.v<16)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:1px 8px;font-family:monospace;font-size:17px">│</div>
      %elseif;(ancestor.anc_sosa.v>15 and ancestor.anc_sosa.v<32)
         <div style="position:absolute;top:%top_;px;left:%left_;px;padding:0px 1px;font-family:monospace;font-size:17px">──</div>
      %end;
    %end;
  %end;
</div>