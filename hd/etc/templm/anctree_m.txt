<!-- anctree_m.txt v2 -->


%define;left9m(xx)
  %apply;nth%with;
       //8//4//12//4//4//12//12//2//6//2//6//10//14//10//14//2//2//6//6//2//2//6//6//10//10//14//14//10//10//14//14//1//3//1//3//5//7//5//7//1//3//1//3//5//7//5//7//9//11//9//11//13//15//13//15//9//11//9//11//13//15//13//15//1//1//3//3//1//1//3//3//5//5//7//7//5//5//7//7//1//1//3//3//1//1//3//3//5//5//7//7//5//5//7//7//9//9//11//11//9//9//11//11//13//13//15//15//13//13//15//15//9//9//11//11//9//9//11//11//13//13//15//15//13//13//15//15//1//1//1//1//3//3//3//3//1//1//1//1//3//3//3//3//5//5//5//5//7//7//7//7//5//5//5//5//7//7//7//7//1//1//1//1//3//3//3//3//1//1//1//1//3//3//3//3//5//5//5//5//7//7//7//7//5//5//5//5//7//7//7//7//9//9//9//9//11//11//11//11//9//9//9//9//11//11//11//11//13//13//13//13//15//15//15//15//13//13//13//13//15//15//15//15//9//9//9//9//11//11//11//11//9//9//9//9//11//11//11//11//13//13//13//13//15//15//15//15//13//13//13//13//15//15//15//15//
  %and;xx%end;
%end;
%define;top9m(xx)
  %apply;nth%with;
       //8//8//8//4//12//4//12//4//4//12//12//4//4//12//12//2//6//2//6//10//14//10//14//2//6//2//6//10//14//10//14//2//2//6//6//2//2//6//6//10//10//14//14//10//10//14//14//2//2//6//6//2//2//6//6//10//10//14//14//10//10//14//14//1//3//1//3//5//7//5//7//1//3//1//3//5//7//5//7//9//11//9//11//13//15//13//15//9//11//9//11//13//15//13//15//1//3//1//3//5//7//5//7//1//3//1//3//5//7//5//7//9//11//9//11//13//15//13//15//9//11//9//11//13//15//13//15//1//1//3//3//1//1//3//3//5//5//7//7//5//5//7//7//1//1//3//3//1//1//3//3//5//5//7//7//5//5//7//7//9//9//11//11//9//9//11//11//13//13//15//15//13//13//15//15//9//9//11//11//9//9//11//11//13//13//15//15//13//13//15//15//1//1//3//3//1//1//3//3//5//5//7//7//5//5//7//7//1//1//3//3//1//1//3//3//5//5//7//7//5//5//7//7//9//9//11//11//9//9//11//11//13//13//15//15//13//13//15//15//9//9//11//11//9//9//11//11//13//13//15//15//13//13//15//15//
  %and;xx%end;
%end;
%define;left9mw(xx)
  %apply;nth%with;
      /0/30/60/90/290/320/350/380/580/610/640/670/870/900/930/960/960/
  %and;xx%end;
%end;
%define;top9mh(xx)
  %apply;nth%with;
      /0/25/55/80/220/245/275/300/440/465/495/520/660/685/715/740/740/
  %and;xx%end;
%end;
%define;top9mw(xx)
  %apply;nth%with;
      /30/30/30/200/30/30/30/200/30/30/30/200/30/30/30/0/0/
  %and;xx%end;
%end;
%define;bhig9l(xx)
  %apply;nth%with;
    /0/140/140/140/140/30/30/25/25/
  %and;xx%end;
%end;
%define;bwid9l(xx)
  %apply;nth%with;
    /200/200/200/200/30/30/30/30/0/
  %and;xx%end;
%end;

%define;left9mdx(xx)
  %apply;nth%with;
      ////200//90//100//100//100//100//30//30//30//30//30//30//30//30//15//15//15//15//15//15//15//15//15//15//15//15//15//15//15//15//
  %and;xx%end;
%end;
%define;top9mdy(xx)
  %apply;nth%with;
      ////70//70//140//80//140//80//70//70//70//70//70//70//70//70//30//25//30//25//30//25//30//25//30//25//30//25//30//25//30//25//
  %and;xx%end;
%end;

%( ----- %)

%define;top9m_(xx)
  %apply;nth%with;
 //7//7//7//3//11//3//
  %and;xx%end;
%end;
%define;left9m_(xx)
  %apply;nth%with;
     //15//7//23//7//7//23//
  %and;xx%end;
%end;

%define;wl(xx)
	%apply;nth%with;
	  ///80/2/30/2/
  %and;xx%end;
%end;
%define;hl(xx)
	%apply;nth%with;
	  ///2/80/2/25/
  %and;xx%end;
%end;

%define;bg(xx)
  %apply;nth%with;
    /FFC8E3/F0CBFE/DDCEFF/FFA8D3/E7A9FE/FF86C2/DD88FD/FF62B0/C4ABFE
  %and;xx%end;
%end;


<h3><tt>Sosa M-tree 8 générations (256 sosa) et indication de la génération 9 (☐)</tt></h3>
<div style="position:relative; left:20px; width:920px; text-align: center;">
<h3>
<a href="%prefix;%access;">%first_name; %surname;<br>
%if;(birth_date.year != "")%birth_date.year;%end
%if;(birth_date.year != "" and is_dead) – %end;
%if;(birth_date.year = "" and death_date.year != "")†%else;%death_date.year;%end;&#013;
</a>
</h3>

</div>
<div style="position:relative; left:20px; width:920px; height:740px; border:solid 0px;">
  %foreach;ancestor_level(0)
    %foreach;ancestor;
		%ancestor.first_name %ancestor.surname; xxx<br>
		%if;(ancestor.birth_date.year != "")° %ancestor.birth_date.year;%end
        %if;(ancestor.birth_date.year != "" and ancestor.is_dead) – %end;
        %if;(ancestor.birth_date.year = "" and ancestor.death_date.year != "")†%else;%ancestor.death_date.year;%end;&#013;
	%end;
  %end;

  %foreach;ancestor_level(8)
    %foreach;ancestor;
     %if;ancestor.is_male;
      %let;left;%apply;left9mw%with;%apply;left9m(ancestor.anc_sosa.v)%end;%in;
      %let;top;%apply;top9mh%with;%apply;top9m(ancestor.anc_sosa.v)%end;%in;
      %let;dx;%apply;left9mdx(ancestor.anc_sosa.v)%in;
      %let;dy;%apply;top9mdy(ancestor.anc_sosa.v)%in;
      %let;leftl;%if;(ancestor.anc_sosa.v=6 or 
                      ancestor.anc_sosa.v=18 or ancestor.anc_sosa.v=22 or
                      ancestor.anc_sosa.v=26 or ancestor.anc_sosa.v=30)%expr(left-dx)%else;%expr(left+dx)%end;%in;
      %let;topl;%if;(ancestor.anc_sosa.v=10 or ancestor.anc_sosa.v=14 or
                      ancestor.anc_sosa.v=34 or ancestor.anc_sosa.v=38 or
                      ancestor.anc_sosa.v=42 or ancestor.anc_sosa.v=46 or
                      ancestor.anc_sosa.v=50 or ancestor.anc_sosa.v=54 or
                      ancestor.anc_sosa.v=58 or ancestor.anc_sosa.v=62
      				)%expr(top-dy)%else;%expr(top+dy)%end;%in;
      %let;wid;%apply;bwid9l(level)%in;
      %let;hig;%apply;bhig9l(level)%in;
      %let;widl;%apply;wl(level)%in;
      %let;higl;%apply;hl(level)%in;
      %let;font;%if;(level>1 and level<5) 14px
            %elseif;(level> 4 and level<7) 14px %else; 14px %end;%in;
      %let;bg;%if;(ancestor.same != "")CBFECE%else;%apply;bg(level)%end;%in;
      %let;bord;%if;(level=8 and ancestor.has_parents)1%else;0%end;%in;
	  %( draw lines %)
     %if;(level>2 and level<7)
      <div style="position:absolute;top:%topl;px;left:%leftl;px;width:%widl;px;height:%higl;px;
                  background-color:#FF00FF;">
      </div>
      %end;
	  %(draw box %)
      <div style="position:absolute;top:%top;px;left:%left;px;width:%wid;px;
      background-color:#%bg;;padding:0px;text-align:center;border:solid %bord;px;font-family:monospace;font-size:%font;">
      <div style="position:relative; top:4px; width:%wid;px; height:%hig;px; border:solid 0px;">
      %if;(level>1)
      %end;
      %if;(level>1 and level<5) 
		  <a href="%prefix;m=A;p=%ancestor.first_name;;n=%ancestor.surname;;oc=%ancestor.occ;;
		           maxv=;v=7;t=T;marriage=on;image=on;bd=;color=on;t1=m"
		  title="Sosa %if;(ancestor.same != "")%ancestor.same;%else;%ancestor.anc_sosa;%end;[:] ♂ 
			%ancestor.first_name; %ancestor.surname; (%ancestor.occ) – [*generation/generations]0 %level;">
		  %ancestor.first_name; %ancestor.surname;</a><br>
		  %if;(ancestor.birth_date.year != "")%ancestor.birth_date.year;%end
          %if;(ancestor.birth_date.year != "" and ancestor.is_dead) – %end;
          %if;(ancestor.birth_date.year = "" and ancestor.death_date.year != "")†%else;%ancestor.death_date.year;%end;&#013;
		  <br>&amp;<br>
		  <a href="%prefix;m=A;p=%ancestor.spouse.first_name;;n=%ancestor.spouse.surname;;oc=%ancestor.occ;;
		           maxv=;v=7;t=T;marriage=on;image=on;bd=;color=on;t1=m"
		  title="Sosa %expr(ancestor.anc_sosa+1)[:] ♀ 
			%ancestor.spouse.first_name; %ancestor.spouse.surname; (%ancestor.spouse.occ) – [*generation/generations]0 %level;">
		  %ancestor.spouse.first_name; %ancestor.spouse.surname;</a><br>
		  %if;(ancestor.spouse.birth_date.year != "")%ancestor.spouse.birth_date.year;%end
          %if;(ancestor.spouse.birth_date.year != "" and ancestor.spouse.is_dead) – %end;
          %if;(ancestor.spouse.birth_date.year = "" and ancestor.spouse.death_date.year != "")†%else;%ancestor.spouse.death_date.year;%end;&#013;
      %end;
      %if;(level> 4)
		  <a href="%prefix;m=A;p=%ancestor.first_name;;n=%ancestor.surname;;oc=%ancestor.occ;;
		           maxv=;v=7;t=T;marriage=on;image=on;bd=;color=on;t1=m"
		  title="Sosa %if;(ancestor.same != "")%ancestor.same;%else;%ancestor.anc_sosa;%end;[:] ♂ 
			%ancestor.first_name; %ancestor.surname; (%ancestor.occ) – [*generation/generations]0 %level;">
		  %if;(ancestor.same != "")%ancestor.same;%else;%ancestor.anc_sosa;%end;</a> 
	  %end; 
      </div>
      </div>
     %end; %( is_male %)
    %end;
  %end;
</div>
