%doctype;
<html>
<head>
  <!-- $Id: forum.txt,v 1.5 2005-08-15 10:53:27 ddr Exp $ -->
  <!-- Copyright (c) 1998-2005 INRIA -->
  <title>%nn;
    %if;(evar.m = "FORUM_ADD")%nn;
      %if;can_post;
        [*add::message/previous message/previous messages/next message]0%nn;
      %else;
        [*incorrect request]%nn;
      %end;
    %elseif;(pos = "")[*database forum]%nn;
    %elseif;(message.subject = "" or message.subject = "-")
      [*database forum]%nn;
    %else;
      %message.subject.cut.50;%nn;
    %end;
  </title>
  <meta name="ROBOTS" content="NONE"%/>
  <meta http-equiv="Content-Type" content="text/html; charset=%charset;"%/>
  <meta http-equiv="Content-Style-Type" content="text/css"%/>
  <style type="text/css"><!--
    .highlight { color: %highlight;; font-weight: bold }
    hr { border: 0; margin: 0; border-bottom: 1px solid }
    a.date { text-decoration: none; color: black }
  --></style>
%base_header;
</head>
<body%body_prop;>
%message_to_wizard;

%if;not cancel_links;
  <table style="float:%right;"><tr><td>
    %if;(referer != "")
      <a href="%referer;"><img
       src="%image_prefix;/left.jpg"%wid_hei;left.jpg; alt="&lt;&lt;"%/></a>
    %end;
    <a href="%prefix;"><img%sp;
    src="%image_prefix;/up.jpg"%wid_hei;up.jpg; alt="^^"%/></a>
  </td></tr></table>
%end;

%if;(evar.m = "FORUM_ADD")
  %if;can_post;
    <h1 style="text-align:center" class="highlight">%nn;
      [*add::message/previous message/previous messages/next message]0%nn;
    </h1>
    <form method="POST" action="%action;">
    <p>
      %hidden;
      <input type="hidden" name="m" value="FORUM_ADD_OK"%/>
    </p>
    <table border="%border;">
    <tr align="%left;">
      <td>[*ident/email/subject]0</td>
      <td><input name="Ident" size="40" maxlength="200"%sp;
           value="%if;(user.name = "")%user.ident;%else;%user.name;%end;"%/><td>
    </tr>
    <tr align="%left;">
      <td>[*ident/email/subject]1 ([optional])</td>
      <td><input name="Email" size="40" maxlength="200" value=""%/><td>
    </tr>
    <tr align="%left;">
      <td>[*ident/email/subject]2</td>
      <td><input name="Subject" size="40" maxlength="200" value=""%/><td>
    </tr>
    </table>
    <p>
    [*message/previous message/previous messages/next message]0
    <br%/>
    <textarea name="Text" rows="15" cols="70"></textarea>
    <br%/>
    %if;(wizard or friend)
      <input type="submit" name="publ_acc" value="[public]"%/>
      <input type="submit" name="priv_acc" value="[private]"%/>
    %else;
      <input type="submit" value="Ok">
    %end;
    </p>
    </form>
  %else;
    <h1 style="text-align:center" class="highlight">%nn;
      [*incorrect request]
    </h1>
  %end;
%elseif;(pos != "")
  <ul>
  <li><a href="%prefix;m=FORUM" accesskey="F">[*database forum] (F)</a></li>
  <li>%if;(message.next_pos != "")
         <a href="%prefix;m=FORUM;p=%message.next_pos;" accesskey="N">%nn;
         [*message/previous message/previous messages/next message]3 (N)%nn;
         </a>%nn;
      %else;&nbsp;%end;</li>
  <li>%if;(message.prev_pos != "")
         <a href="%prefix;m=FORUM;p=%message.prev_pos;" accesskey="P">%nn;
         [*message/previous message/previous messages/next message]1 (P)%nn;
         </a>%nn;
      %else;&nbsp;%end;</li>
  </ul>
  <p>
  <b>%message.ident;</b>
  %if;(message.email != "")%nn;
    <a href="mailto:%message.email;">%message.email;</a>%end;
  <br%/>
  %if;(message.subject != "")
    <b>[*ident/email/subject]2: %message.subject;</b>
    <br%/>
  %end;
  %if;(message.access = "priv")
    <b>[*access]: [private]</b>
    <br%/>
  %end;
  <i>%message.time;</i>
  </p>
  <dl><dd>
    %if;(message.wiki = "on")%message.text.wiki;%else;%message.text;%end;
  </dd></dl>
  %if;(message.wizard != "" and wizard and user.ident = message.wizard)
    <form method="POST" action="%action;">
    <p>
    %hidden;
    <input type="hidden" name="m" value="FORUM_DEL"%/>
    <input type="hidden" name="p" value="%message.pos;"%/>
    <input type="submit" value="%nn;
       [*delete::message/previous message/previous messages/next message]0"%/>
    </p>
    </form>
  %end;
%else;
  <h1 style="text-align:center" class="highlight">[*database forum]</h1>
  %if;can_post;
    <form method="GET" action="%action;">
    <p>
    %hidden;
    <input type="hidden" name="m" value="FORUM_ADD"%/>
    <input type="submit"%sp;
     value="[*add::message/previous message/previous messages/next message]0"%/>
    </p>
    </form>
  %end;
  %let;len;%if;(evar.len != "")%evar.len;%else;100%end;%in;
  %let;from;%if;(evar.from != "")%evar.from;%else;-1%end;%in;
  <table border="%border;">
  %foreach;message(from, len)
    %if;(message.date != message.prev_date)
      %if;(message.prev_date != "" and
           message.date.month != message.prev_date.month)
        <tr align="%left;"><td colspan="4">&nbsp;</td></tr>
      %end;
      <tr align="%left;"><td colspan="4">%message.date;</td></tr>
    %end;
    <tr align="%left;">
    <td><tt>&nbsp;%if;(message.access = "priv")*%else;&nbsp;%end;
            &nbsp;</tt></td>
    <td><tt>%message.hour;</tt></td>
    <td><a href="%prefix;m=FORUM;p=%message.pos;"><b>%message.ident.cut.23;
        </b></a></td>
    <td>%nn;
       %if;(message.subject = "" or message.subject = "-")
         <i>...&nbsp;%message.text.cut.50;</i>%nn;
       %else;
         %message.subject.cut.50;%nn;
       %end;
    </td>
    </tr>
  %end;
  %if;(pos != "")
    <tr align="%left;"><td colspan="4">&nbsp;</td></tr>
    <tr align="%left;"><td colspan="4">%nn;
      <a href="%prefix;m=FORUM;len=%len;;from=%pos;
      ">[message/previous message/previous messages/next message]2</a></td></tr>
  %end;
  </table>
%end;

<div>
<a href="%prefix;"><img src="%image_prefix;/gwlogo.png"
 alt="..." width="64" height="72" style="border:0;float:%right;"%/></a>
<br%/>
</div>
%copyright;
%base_trailer;
</body>
</html>
